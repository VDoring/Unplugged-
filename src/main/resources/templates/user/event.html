<!-- 행사일정 페이지 -->

<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <!-- 화면 해상도에 따라 글자 크기 대응(모바일 대응) -->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <!-- jquery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- fullcalendar CDN -->
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.8.0/main.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.8.0/main.min.js'></script>
    <!-- fullcalendar 언어 CDN -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.8.0/locales-all.min.js'></script>

    <!-- sweetalert2 알림창 CDN -->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>-->

<!--    <script src="../../../../../build/resources/main/static/fullcalendar/http_code.jquery.com_jquery-3.6.0.js"></script>-->
<!--    &lt;!&ndash; fullcalendar CDN &ndash;&gt;-->
<!--    <link href='../../../../../build/resources/main/static/fullcalendar/http_cdn.jsdelivr.net_npm_fullcalendar@5.8.0_main.css' rel='stylesheet' />-->
<!--    <script src='../../../../../build/resources/main/static/fullcalendar/http_cdn.jsdelivr.net_npm_fullcalendar@5.8.0_main.js'></script>-->
<!--    &lt;!&ndash; fullcalendar 언어 CDN &ndash;&gt;-->
<!--    <script src='../../../../../build/resources/main/static/fullcalendar/http_cdn.jsdelivr.net_npm_fullcalendar@5.8.0_locales-all.js'></script>-->

    <style>
        /* body 스타일 */
        html, body {
            overflow: hidden;
            font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
            font-size: 14px;
        }
        /* 캘린더 위의 해더 스타일(날짜가 있는 부분) */
        .fc-header-toolbar {
            padding-top: 1em;
            padding-left: 1em;
            padding-right: 1em;
        }
    </style>
</head>
<body style="padding:30px;">
<!-- calendar 태그 -->
<div id='calendar-container'>
    <div id='calendar'></div>
</div>
<!--<div class="btn">-->
<!--    <button onclick="location.href='/user/eventadd'">글쓰기</button>-->
<!--</div>-->
<script>
    window.mobilecheck = function() {  //컴퓨터인지 모바일인지 확인. 컴퓨터일경우 False, 모바일일경우 True 리턴
        var check = false;
        (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
        return check;
    };

    (function(){
        $(function(){
            // calendar element 취득
            var calendarEl = $('#calendar')[0];
            // full-calendar 생성하기
            var calendar = new FullCalendar.Calendar(calendarEl, {
                height: 'auto', // calendar 높이 설정
                contentHeight: 'auto', // calendar 높이 설정
                expandRows: true, // 화면에 맞게 높이 재설정
                slotMinTime: '00:00', // Day 캘린더에서 시작 시간
                slotMaxTime: '24:00', // Day 캘린더에서 종료 시간
                // 해더에 표시할 툴바
                headerToolbar: {
                    left: 'prev', // 이전 달로 이동 버튼
                    center: 'title',
                    right: 'next', // 이전 달로 이동 버튼
                    bottom: 'today'
                },
                initialView: 'dayGridMonth', // 초기 로드 될때 보이는 캘린더 화면(기본 설정: 달)
                // initialDate: '2021-07-15', // 초기 날짜 설정 (설정하지 않으면 오늘 날짜가 보인다.)
                navLinks: false, // 날짜를 선택하면 Day 캘린더나 Week 캘린더로 링크
                editable: true, // 수정 가능 여부
                selectable: true, // 달력 일자 드래그 설정가능
                nowIndicator: true, // 현재 시간 마크
                dayMaxEvents: true, // 이벤트가 오버되면 높이 제한 (+ 몇 개식으로 표현)
                longPressDelay:1000,
                eventLongPressDelay:1000, //event가 draggable 하게 만들기 위해 걸리는 시간
                selectLongPressDelay:100, //date가 select 하게 만들기 위해 걸리는 시간
                locale: 'ko', // 한국어 설정

                eventAdd: function(obj) { // 이벤트가 추가되면 발생하는 이벤트
                    console.log(obj);
                },
                eventChange: function(obj) { // 이벤트가 수정되면 발생하는 이벤트
                    console.log(obj);
                },
                eventRemove: function(obj){ // 이벤트가 삭제되면 발생하는 이벤트
                    console.log(obj);
                },
                dateClick: async function(obj){  // (모바일에서 작동) 스케줄 내용 추가 알림창. 스케줄 추가 이후 드래그로 이벤트를 생성할 수 있다.
                    var filter = "win16|win32|win64|mac|macintel";

                    if ( navigator.platform ) {
                        if ( filter.indexOf( navigator.platform.toLowerCase() ) < 0 ) {
                            console.log('모바일 접속 확인.');

                            console.log("dateClick 이벤트 시작!")
                            var title;

                            await Swal.fire({
                                title:'스케줄 추가',
                                html: '<input type="text" id="schedule_title" class="swal2-input" placeholder="스케줄 제목을 입력하세요">',
                                focusConfirm: false,
                                showCancelButton: true,
                                confirmButtonText: '확인',
                                cancelButtonText: '취소',
                                preConfirm: () => {
                                    var schedule_title = Swal.getPopup().querySelector('#schedule_title').value
                                    if(!schedule_title)
                                        Swal.showValidationMessage(`입력되지 않았습니다`)
                                    else
                                        title = schedule_title
                                }
                            })

                            if (title) {
                                calendar.addEvent({
                                    title: title,
                                    start: arg.start,
                                    end: arg.end,
                                    allDay: arg.allDay
                                })
                            }
                            calendar.unselect()
                            console.log("dateClick 이벤트 끝!")
                        } else {
                            console.log('컴퓨터 접속 확인. dateClick 이벤트 비활성화됨.');
                        }
                    }
                },
                select: async function(arg) { // 스케줄 내용 추가 알림창. 스케줄 추가 이후 드래그로 이벤트를 생성할 수 있다.
                    console.log("select 이벤트 시작!")
                    var title;
                    var date_start, date_end;
                    var time_start, time_end;

                    await Swal.fire({
                        title:'스케줄 추가',
                        html: '<input type="text" id="schedule_title" class="swal2-input" placeholder="스케줄 내용 입력">'
                            + '<input type="date" id="schedule_date_start" class="swal2-input" placeholder="날짜">'
                            + '<input type="date" id="schedule_date_end" class="swal2-input" placeholder="날짜">',
                        focusConfirm: false,
                        showCancelButton: true,
                        confirmButtonText: '확인',
                        cancelButtonText: '취소',
                        preConfirm: () => {
                            var schedule_title = Swal.getPopup().querySelector('#schedule_title').value
                            var schedule_date_start = Swal.getPopup().querySelector('#schedule_date_start').value
                            var schedule_date_end = Swal.getPopup().querySelector('#schedule_date_end').value
                            if(!schedule_title)
                                Swal.showValidationMessage(`내용이 입력되지 않았습니다`)
                            else {
                                title = schedule_title
                                date_start = schedule_date_start
                                date_end = schedule_date_end
                            }
                        }
                    })

                    if (title) {
                        console.log(title)
                        console.log(date_start)
                        console.log(date_end)
                        if(time_start)
                            date_start = date_start + "T" + time_start
                        if(time_end)
                            date_end = date_end + "T" + time_end

                        console.log(date_start)
                        console.log(date_end)

                        calendar.addEvent({
                            title: title,
                            start: date_start,
                            end: date_end,
                            allDay: arg.allDay
                        })
                    }
                    calendar.unselect()
                    console.log("select 이벤트 끝!")
                },

                eventClick: function(info) {
                    // alert('Event: ' + info.event.title);
                    // alert('Start: ' + info.event.start + '\nEnd: ' + info.event.end)
                    // alert('Coordinates: ' + info.jsEvent.pageX + ',' + info.jsEvent.pageY);
                    // alert('View: ' + info.view.type);
                    Swal.fire({
                        title: '스케줄 삭제',
                        text: "\"" + info.event.title + "\" 스케쥴을 삭제하시겠습니까?",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: '네, 삭제합니다'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            info.event.remove();  // 선택한 스케쥴 삭제
                            Swal.fire(
                                '스케쥴 삭제됨!',
                                '삭제가 완료되었습니다.',
                                'success'
                            )
                        }
                    })
                },

                // 샘플용 이벤트들
                events: [{
                    title: 'Repeating Event',
                    start: '2023-04-20T16:00:00',
                    end: '2023-04-22T17:00:00'
                }, {
                    title: 'Repeating Event 2',
                    start: '2023-04-20T16:00:00',
                    end: '2023-04-21T17:00:00'
                }]
                // events: [
                //     {
                //         title: 'All Day Event',
                //         start: '2021-07-01',
                //     },
                //     {
                //         title: 'Long Event',
                //         start: '2021-07-07',
                //         end: '2021-07-10'
                //     },
                //     {
                //         groupId: 999,
                //         title: 'Repeating Event',
                //         start: '2021-07-09T16:00:00'
                //     },
                //     {
                //         groupId: 999,
                //         title: 'Repeating Event',
                //         start: '2021-07-16T16:00:00'
                //     },
                //     {
                //         title: 'Conference',
                //         start: '2021-07-11',
                //         end: '2021-07-13'
                //     },
                //     {
                //         title: 'Meeting',
                //         start: '2021-07-12T10:30:00',
                //         end: '2021-07-12T12:30:00'
                //     },
                //     {
                //         title: 'Lunch',
                //         start: '2021-07-12T12:00:00'
                //     },
                //     {
                //         title: 'Meeting',
                //         start: '2021-07-12T14:30:00'
                //     },
                //     {
                //         title: 'Happy Hour',
                //         start: '2021-07-12T17:30:00'
                //     },
                //     {
                //         title: 'Dinner',
                //         start: '2021-07-12T20:00:00'
                //     },
                //     {
                //         title: 'Birthday Party',
                //         start: '2021-07-13T07:00:00'
                //     },
                //     {
                //         title: 'Click for Google',
                //         url: 'http://google.com/', // 클릭시 해당 url로 이동
                //         start: '2021-07-28'
                //     }
                // ]
            });

            // 캘린더 랜더링
            calendar.render();
        });
    })();
</script>
</body>
</html>






<!--<!DOCTYPE html>-->
<!--<html lang='en'>-->
<!--<head>-->
<!--    <meta charset='utf-8' />-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--    <link href='../../../../../build/resources/main/static/fullcalendar/lib/main.css' rel='stylesheet' />-->
<!--    <script src='../../../../../build/resources/main/static/fullcalendar/lib/main.js'></script>-->
<!--    <script src='../../../../../build/resources/main/static/fullcalendar/lib/locales-all.js'></script>-->
<!--    <script>-->

<!--        document.addEventListener('DOMContentLoaded', function() {-->
<!--            var calendarEl = document.getElementById('calendar');-->
<!--            var calendar = new FullCalendar.Calendar(calendarEl, {-->
<!--                initialView: 'dayGridMonth'-->
<!--            });-->
<!--            calendar.render();-->
<!--        });-->

<!--    </script>-->
<!--</head>-->
<!--<body>-->
<!--<div id='calendar'></div>-->
<!--</body>-->
<!--</html>-->